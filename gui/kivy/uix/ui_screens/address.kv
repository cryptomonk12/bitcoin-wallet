#:import _ electrum_gui.kivy.i18n._
#:import Decimal decimal.Decimal
#:set btc_symbol chr(171)
#:set mbtc_symbol chr(187)
#:set font_light 'gui/kivy/data/fonts/Roboto-Condensed.ttf'

<RequestLabel@Label>
    text_size: self.width, None
    halign: 'left'
    valign: 'top'

<RequestItem@CardItem>
    address: ''
    memo: ''
    amount: ''
    status: ''
    date: ''
    icon: ''
	color: .699, .699, .699, 1
    Image:
        id: icon
        source: root.icon
        size_hint: None, 1
        width: self.height *.54 if root.icon else 0
        mipmap: True
    BoxLayout:
        spacing: '8dp'
        height: '32dp'
        orientation: 'vertical'
        Widget
        RequestLabel:
            text: root.address
            shorten: True
        Widget
        RequestLabel:
            text: root.date + "    " + root.memo
            color: .699, .699, .699, 1
            font_size: '13sp'
            shorten: True
        Widget
    BoxLayout:
        spacing: '8dp'
        height: '32dp'
        orientation: 'vertical'
        Widget
        RequestLabel:
            text: root.amount
            halign: 'right'
            font_size: '15sp'
        Widget
        RequestLabel:
            text: root.status
            halign: 'right'
            font_size: '13sp'
            color: .699, .699, .699, 1 

AddressScreen:
    id: addr_screen
    name: 'address'
    message: ''
    addr_type: 'Receiving'
    addr_status: 'New'
    pr_status: 'Pending'

    on_message:
		self.parent.generic_search()


    BoxLayout
        padding: '12dp', '70dp', '12dp', '12dp'
        spacing: '12dp'
        orientation: 'vertical'
        size_hint: 1, 1.1

		BoxLayout:
			spacing: '6dp'
			size_hint: 1, None
			orientation: 'horizontal'
			AddressFilter:	
				id: blue_bottom
				opacity: 1
				size_hint: 1, None
				height: self.minimum_height
				spacing: '5dp'
				AddressButton:
					id: search
					text: addr_screen.addr_type 
					on_release: Clock.schedule_once(lambda dt: app.address_screen.search(0))
			AddressFilter:	
				id: blue_bottom
				opacity: 1
				size_hint: 1, None
				height: self.minimum_height
				spacing: '5dp'
				AddressButton:
					id: search
					text: addr_screen.addr_status
					on_release: Clock.schedule_once(lambda dt: app.address_screen.search(1))
			AddressFilter:
				id: blue_bottom
				opacity: 1
				size_hint: 1, None
				height: self.minimum_height
				spacing: '5dp'
				AddressButton:
					id: pending
					text: addr_screen.pr_status
					on_release: Clock.schedule_once(lambda dt: app.address_screen.search(2))
			AddressFilter:
				id: blue_bottom
				opacity: 1
				size_hint: 1, None
				height: self.minimum_height
				spacing: '5dp'
				canvas.before:
					Color:
						rgba: 0.9, 0.9, 0.9, 1
				AddressButton:
					id: change
					text: addr_screen.message if addr_screen.message else _('Search')
					on_release: Clock.schedule_once(lambda dt: app.description_dialog(addr_screen))
 
		ScrollView:
			GridLayout:
				cols: 1
				id: search_container
				size_hint_y: None
				height: self.minimum_height
				spacing: '2dp'
